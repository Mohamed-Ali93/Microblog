<div class="container py-5">
  <h1 class="h3 mb-4 text-center">Create New Post</h1>

  <form
    [formGroup]="postForm"
    (ngSubmit)="onSubmit()"
    class="card shadow-sm mx-auto p-4"
    style="max-width: 600px;"
  >
    <!-- Post Content -->
    <div class="mb-3">
      <label for="content" class="form-label fw-bold">Post Content</label>
      <textarea
        formControlName="content"
        id="content"
        class="form-control"
        placeholder="What's happening?"
        maxlength="140"
        rows="3"
      ></textarea>
      <div class="form-text">
        {{ postForm.get('content')?.value?.length || 0 }}/140 characters
      </div>
    </div>

    <!-- Image Upload -->
    <div class="mb-3">
      <label for="imageUpload" class="form-label fw-bold">Upload Image (Optional)</label>
      <input
        type="file"
        id="imageUpload"
        (change)="onFileSelected($event)"
        accept=".jpg,.jpeg,.png,.webp"
        class="form-control"
      />
    </div>

    <!-- Image Preview -->
    <div *ngIf="previewUrl" class="mb-3 text-center">
      <img
        [src]="previewUrl"
        alt="Image preview"
        class="img-fluid rounded mb-2"
        style="max-height: 300px;"
      />
      <div>
        <button
          type="button"
          (click)="removeImage()"
          class="btn btn-danger"
        >
          Remove Image
        </button>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="d-grid">
      <button
        type="submit"
        [disabled]="!postForm.valid"
        class="btn btn-primary"
      >
        Post
      </button>
    </div>
  </form>
</div>
